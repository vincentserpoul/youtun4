# Tarpaulin Configuration
# Run with: cargo tarpaulin --config tarpaulin.toml

[default]
# Workspace configuration
workspace = true

# Exclude UI crate (WASM target not supported by tarpaulin)
exclude = ["youtun4-ui"]

# Output formats
out = ["Html", "Xml"]
output-dir = "coverage"

# Timeout per test (seconds)
timeout = "300s"

# Skip clean to speed up repeated runs
skip-clean = true

# Engine configuration
engine = "Auto"

# Include all features
all-features = true

# Verbose output
verbose = true

# Coverage targets: lib, tests, doctests
run-types = ["Lib", "Tests", "Doctests"]

# CI-specific configuration
[ci]
workspace = true
exclude = ["youtun4-ui"]
out = ["Xml"]
output-dir = "coverage"
timeout = "300s"
skip-clean = true
engine = "Auto"
all-features = true
# Coverage threshold adjusted to realistic level for desktop app:
# - WASM UI code excluded (youtun4-ui)
# - Tauri commands are I/O-heavy and difficult to unit test
# - Core library modules (playlist, queue) now have comprehensive tests
fail-under = 35
